Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
Error: Could not find or load main class com.ksc.dc.queryapi.QueryApi
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/sunmaolin/common-query-api/lib/slf4j-log4j12-1.7.12.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/sunmaolin/common-query-api/lib/logback-classic-1.1.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]
log4j:WARN No appenders could be found for logger (com.ksc.dc.queryapi.QueryApi).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Exception in thread "main" java.lang.IllegalArgumentException: LoggerFactory is not a Logback LoggerContext but Logback is on the classpath. Either remove Logback or the competing implementation (class org.slf4j.impl.Log4jLoggerFactory loaded from file:/home/sunmaolin/common-query-api/lib/slf4j-log4j12-1.7.12.jar). If you are using Weblogic you will need to add 'org.slf4j' to prefer-application-packages in WEB-INF/weblogic.xml Object of class [org.slf4j.impl.Log4jLoggerFactory] must be an instance of class ch.qos.logback.classic.LoggerContext
	at org.springframework.util.Assert.isInstanceOf(Assert.java:339)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.getLoggerContext(LogbackLoggingSystem.java:151)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.getLogger(LogbackLoggingSystem.java:143)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.beforeInitialize(LogbackLoggingSystem.java:89)
	at org.springframework.boot.logging.LoggingApplicationListener.onApplicationStartedEvent(LoggingApplicationListener.java:152)
	at org.springframework.boot.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:139)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:128)
	at org.springframework.boot.context.event.EventPublishingRunListener.publishEvent(EventPublishingRunListener.java:100)
	at org.springframework.boot.context.event.EventPublishingRunListener.started(EventPublishingRunListener.java:54)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:277)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:957)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:946)
	at com.ksc.dc.queryapi.QueryApi.main(QueryApi.java:32)
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
14:04:23,016 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
14:04:23,017 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
14:04:23,017 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:04:23,018 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
14:04:23,018 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:04:23,018 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
14:04:23,179 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
14:04:23,181 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
14:04:23,194 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
14:04:23,194 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
14:04:23,194 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
14:04:23,197 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
14:04:23,205 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:04:23,252 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
14:04:23,255 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
14:04:23,268 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
14:04:23,269 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
14:04:23,273 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
14:04:23,273 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
14:04:23,275 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Mon Sep 05 14:04:23 CST 2016
14:04:23,276 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:04:23,277 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0905.log
14:04:23,277 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
14:04:23,277 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
14:04:23,279 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
14:04:23,279 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
14:04:23,279 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
14:04:23,279 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
14:04:23,280 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
14:04:23,280 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
14:04:23,280 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
14:04:23,280 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
14:04:23,280 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

14:04:23.293             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

14:04:23.543             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 8405 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
14:04:23.572             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Mon Sep 05 14:04:23 CST 2016]; root of context hierarchy
14:04:24.047             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
14:04:24.183             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
14:04:24.221             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
14:04:24.274             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:04:24.492             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
14:04:24.576             main  INFO  o.a.c.c.StandardService Starting service Tomcat
14:04:24.576             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
14:04:24.665 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
14:04:24.665 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1093 ms
14:04:25.214 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
14:04:25.216 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
14:04:25.216 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
14:04:26.523             main  INFO      c.k.d.q.s.EsService es连接成功
14:04:26.584             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Mon Sep 05 14:04:23 CST 2016]; root of context hierarchy
14:04:26.622             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
14:04:26.623             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
14:04:26.623             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
14:04:26.638             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:04:26.638             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:04:26.660             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:04:26.699             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
14:04:26.718             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
14:04:26.723             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
14:04:26.725             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
14:04:26.733             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.358 seconds (JVM running for 4.089)
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi error
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi esService
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
14:04:26.734             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi messageConverters
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
14:04:26.735             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
14:04:26.736             main  INFO c.k.dc.queryapi.QueryApi queryApi
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi queryController
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi serverProperties
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi viewResolver
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
14:04:26.737             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
14:05:22.331 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
14:05:22.331 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
14:05:22.345 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 14 ms
java.lang.NullPointerException
	at org.joda.time.format.DateTimeFormatterBuilder$NumberFormatter.parseInto(DateTimeFormatterBuilder.java:1304)
	at org.joda.time.format.DateTimeFormatterBuilder$Composite.parseInto(DateTimeFormatterBuilder.java:2462)
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:879)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:21)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:05:22.405 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误
14:06:40.574 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
14:06:41.949 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间1281
14:08:38.455 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService sql解析错误err find condition class com.alibaba.druid.sql.ast.expr.SQLCharExpr
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@4744af42
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:08:38.458 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
14:11:24.555 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService sql解析错误err find condition class com.alibaba.druid.sql.ast.expr.SQLCharExpr
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@3a17fa52
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:11:24.557 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误
14:12:35.188 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService sql解析错误err find condition class com.alibaba.druid.sql.ast.expr.SQLCharExpr
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@75cad5a0
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:12:35.190 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
14:19:03.488 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
14:19:04.830 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间1327
14:40:13.899 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
14:40:16.534 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间2623
14:41:20.986 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "code" : {
              "terms" : {
                "field" : "code",
                "size" : 0
              },
              "aggregations" : {
                "SUM(traffic)" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:41:22.684 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间1677
14:43:11.483 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "userid" : {
              "terms" : {
                "field" : "userid",
                "size" : 0
              },
              "aggregations" : {
                "SUM(traffic)" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:43:15.878 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间4383
14:43:35.974 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "time" : {
              "terms" : {
                "field" : "time"
              },
              "aggregations" : {
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "maxsum(traffic)" : {
              "max_bucket" : {
                "buckets_path" : [ "time>flow" ]
              }
            }
          }
        }
      }
    }
  }
}
14:43:37.196 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间1185
14:45:00.251 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472313540000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472313540000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472313540000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:45:01.142 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间876
14:51:41.305 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:51:44.535 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间3217
14:51:47.506 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:51:50.799 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间3282
14:51:54.424 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:51:55.465 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间1029
14:51:57.694 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:51:59.280 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间1576
14:52:00.760 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:52:01.805 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间1034
14:52:02.982 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:52:03.743 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间750
14:52:04.640 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:52:05.388 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间734
14:52:06.301 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:52:07.414 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间1104
14:55:17.365 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:55:17.421 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间54
14:56:07.224 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
14:56:07.898 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间666
15:34:51.702 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
15:34:52.661 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间957
15:35:02.149 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
15:35:02.815 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间664
15:35:03.954 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
15:35:04.521 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间565
15:35:05.240 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
15:35:06.089 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间847
19:21:33.934 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
19:21:34.452 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间515
19:34:03.648 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
19:34:04.031 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间380
19:34:31.408 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
19:34:31.917 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间507
19:34:49.337 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
19:34:49.857 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间518
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
14:17:16,949 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
14:17:16,950 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
14:17:16,950 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:17:16,951 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
14:17:16,951 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:17:16,951 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
14:17:17,135 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
14:17:17,137 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
14:17:17,186 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
14:17:17,186 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
14:17:17,186 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
14:17:17,189 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
14:17:17,197 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:17:17,289 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
14:17:17,294 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
14:17:17,316 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
14:17:17,317 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
14:17:17,322 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
14:17:17,322 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
14:17:17,327 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Thu Sep 08 14:17:17 CST 2016
14:17:17,328 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:17:17,329 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0908.log
14:17:17,329 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
14:17:17,338 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
14:17:17,341 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
14:17:17,341 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
14:17:17,342 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
14:17:17,343 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
14:17:17,343 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
14:17:17,343 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
14:17:17,343 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
14:17:17,343 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
14:17:17,345 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

14:17:17.353             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

14:17:17.850             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 20861 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
14:17:17.895             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Thu Sep 08 14:17:17 CST 2016]; root of context hierarchy
14:17:18.587             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
14:17:18.772             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
14:17:18.850             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
14:17:18.937             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:17:19.312             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
14:17:19.432             main  INFO  o.a.c.c.StandardService Starting service Tomcat
14:17:19.433             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
14:17:19.590 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
14:17:19.590 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1695 ms
14:17:20.224 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
14:17:20.227 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
14:17:20.228 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
14:17:21.657             main  INFO      c.k.d.q.s.EsService es连接成功
14:17:21.743             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Thu Sep 08 14:17:17 CST 2016]; root of context hierarchy
14:17:21.796             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
14:17:21.797             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
14:17:21.797             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
14:17:21.813             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:17:21.813             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:17:21.838             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:17:21.902             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
14:17:21.928             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
14:17:21.933             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
14:17:21.936             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
14:17:21.965             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
14:17:21.966             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 4.407 seconds (JVM running for 6.722)
14:17:21.966             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
14:17:21.966             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
14:17:21.966             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
14:17:21.966             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi error
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi esService
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi messageConverters
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
14:17:21.967             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
14:17:21.968             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi queryApi
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi queryController
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi serverProperties
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi viewResolver
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
14:17:21.969             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
11:41:08.604         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Thu Sep 08 14:17:17 CST 2016]; root of context hierarchy
11:41:08.619         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
11:41:19,792 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
11:41:19,793 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
11:41:19,793 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
11:41:19,794 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
11:41:19,794 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
11:41:19,794 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
11:41:19,973 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
11:41:19,975 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
11:41:20,011 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
11:41:20,011 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
11:41:20,011 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
11:41:20,014 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
11:41:20,022 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
11:41:20,095 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
11:41:20,098 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
11:41:20,118 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
11:41:20,120 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
11:41:20,123 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
11:41:20,123 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
11:41:20,126 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Mon Sep 12 11:41:20 CST 2016
11:41:20,127 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
11:41:20,128 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0912.log
11:41:20,128 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
11:41:20,139 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
11:41:20,140 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
11:41:20,140 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
11:41:20,140 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
11:41:20,149 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
11:41:20,149 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
11:41:20,149 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
11:41:20,149 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
11:41:20,149 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
11:41:20,150 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

11:41:20.163             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

11:41:20.522             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 22323 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
11:41:20.566             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Mon Sep 12 11:41:20 CST 2016]; root of context hierarchy
11:41:21.084             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
11:41:21.231             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
11:41:21.285             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
11:41:21.369             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
11:41:21.645             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
11:41:21.754             main  INFO  o.a.c.c.StandardService Starting service Tomcat
11:41:21.755             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
11:41:21.897 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
11:41:21.897 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1331 ms
11:41:22.465 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
11:41:22.468 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
11:41:22.468 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
11:41:23.948             main  INFO      c.k.d.q.s.EsService es连接成功
11:41:24.039             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Mon Sep 12 11:41:20 CST 2016]; root of context hierarchy
11:41:24.083             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
11:41:24.084             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
11:41:24.084             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
11:41:24.099             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
11:41:24.099             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
11:41:24.121             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
11:41:24.169             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
11:41:24.195             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
11:41:24.199             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
11:41:24.201             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
11:41:24.219             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.904 seconds (JVM running for 5.613)
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi error
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi esService
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
11:41:24.220             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi messageConverters
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
11:41:24.221             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi queryApi
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi queryController
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi serverProperties
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
11:41:24.222             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi viewResolver
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
11:41:24.223             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
11:43:52.930 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
11:43:52.931 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
11:43:52.946 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 15 ms
11:43:53.235 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
11:44:01.977 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间8590
java.lang.NullPointerException
	at org.joda.time.format.DateTimeFormatterBuilder$NumberFormatter.parseInto(DateTimeFormatterBuilder.java:1304)
	at org.joda.time.format.DateTimeFormatterBuilder$Composite.parseInto(DateTimeFormatterBuilder.java:2462)
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:879)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:21)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
15:42:07.098 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at org.joda.time.format.DateTimeFormatterBuilder$NumberFormatter.parseInto(DateTimeFormatterBuilder.java:1304)
	at org.joda.time.format.DateTimeFormatterBuilder$Composite.parseInto(DateTimeFormatterBuilder.java:2462)
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:879)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:21)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:12:43.477 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at org.joda.time.format.DateTimeFormatterBuilder$NumberFormatter.parseInto(DateTimeFormatterBuilder.java:1304)
	at org.joda.time.format.DateTimeFormatterBuilder$Composite.parseInto(DateTimeFormatterBuilder.java:2462)
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:879)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:21)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:12:45.889 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误
16:32:07.991 http-nio-9998-exec-7  INFO o.a.c.h.Http11NioProcessor Error parsing HTTP request header
 Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:42:12.489 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:42:43.038 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:43:34.942 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:45:29.959 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:46:34.426 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:48:25.823 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:49:42.370 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:50:27.994 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at org.joda.time.format.DateTimeFormatterBuilder$NumberFormatter.parseInto(DateTimeFormatterBuilder.java:1304)
	at org.joda.time.format.DateTimeFormatterBuilder$Composite.parseInto(DateTimeFormatterBuilder.java:2462)
	at org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:879)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:21)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:51:35.701 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController 查询错误
16:51:58.489 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
16:52:01.796 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间3300
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:52:32.105 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
16:52:50.461 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
16:52:51.556 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间1091
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:53:01.048 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误
16:53:39.917 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
16:53:41.393 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间1470
16:56:30.937 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "fss" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
16:56:32.329 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间1386
16:56:44.259 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "fss1" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
16:56:45.441 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间1176
21:30:12.534 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "fss1" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:30:13.580 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间1039
21:30:25.530 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1469376000000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1469376000000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1469376000000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "fss1" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160726col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
21:30:25.708 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误
21:30:38.504 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1470326400000,
                "to" : 1472572740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1470326400000,1472572740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1470326400000,
          "max" : 1472572740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "fss1" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:30:44.800 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间6287
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:32:26.357 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:32:30.650 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
21:32:40.786 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1470326400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1470326400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1470326400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:32:53.931 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间12986
21:32:59.368 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1470326400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1470326400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1470326400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:33:07.581 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间8117
21:33:13.589 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1470326400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1470326400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1470326400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:33:19.374 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间5625
21:53:10.241 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:53:13.192 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间2940
21:55:06.488 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "domain" : "js.a.yximgs.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:55:07.348 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间858
21:55:27.007 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "domain" : "js.a.yximgs.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
21:55:27.734 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间718
22:06:57.159 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
22:07:01.851 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间4161
22:08:13.819 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
22:08:17.664 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间3361
22:11:29.675 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn1160825col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
22:11:29.680 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误
22:16:02.588 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472126400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472126400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472126400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
22:16:03.649 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间977
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
22:16:12.975 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误
22:16:25.753 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472126400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472126400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472126400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
22:16:26.718 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间850
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
14:38:46,411 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
14:38:46,411 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
14:38:46,411 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:38:46,412 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
14:38:46,412 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
14:38:46,412 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
14:38:46,477 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
14:38:46,479 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
14:38:46,492 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
14:38:46,492 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
14:38:46,492 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
14:38:46,494 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
14:38:46,501 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:38:46,549 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
14:38:46,552 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
14:38:46,566 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
14:38:46,567 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
14:38:46,570 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
14:38:46,570 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
14:38:46,573 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Tue Sep 13 14:38:46 CST 2016
14:38:46,574 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
14:38:46,575 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0913.log
14:38:46,575 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
14:38:46,576 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
14:38:46,577 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
14:38:46,577 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
14:38:46,577 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
14:38:46,578 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
14:38:46,578 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
14:38:46,578 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
14:38:46,578 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
14:38:46,578 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
14:38:46,579 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

14:38:46.583             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

14:38:46.908             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 15916 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
14:38:46.939             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 14:38:46 CST 2016]; root of context hierarchy
14:38:47.418             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
14:38:47.551             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
14:38:47.619             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
14:38:47.694             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
14:38:47.946             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
14:38:48.034             main  INFO  o.a.c.c.StandardService Starting service Tomcat
14:38:48.034             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
14:38:48.117 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
14:38:48.118 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1179 ms
14:38:48.485 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
14:38:48.488 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
14:38:48.488 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
14:38:49.664             main  INFO      c.k.d.q.s.EsService es连接成功
14:38:49.727             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 14:38:46 CST 2016]; root of context hierarchy
14:38:49.766             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
14:38:49.767             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
14:38:49.767             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
14:38:49.784             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:38:49.784             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:38:49.812             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
14:38:49.877             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
14:38:49.896             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
14:38:49.901             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
14:38:49.903             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
14:38:49.913             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
14:38:49.913             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.203 seconds (JVM running for 4.185)
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi error
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi esService
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi messageConverters
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
14:38:49.914             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
14:38:49.915             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi queryApi
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi queryController
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi serverProperties
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi viewResolver
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
14:38:49.916             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
18:51:56.916 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
18:51:56.919 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
18:51:56.951 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 32 ms
18:51:57.318 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:52:03.887 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间5690
18:52:27.753 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:52:28.794 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间1018
18:52:34.456 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:52:35.439 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间965
18:52:39.041 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:52:40.093 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间1035
18:54:58.502 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:54:59.014 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间498
18:55:01.907 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:02.488 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间569
18:55:05.430 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=5m,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:05.994 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间548
18:55:15.233 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:16.079 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间842
18:55:18.470 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:19.303 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间830
18:55:25.580 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:25.982 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间400
18:55:27.575 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "tc" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
18:55:27.996 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间419
18:59:34.124 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService sql解析错误could not parse sqlBinaryOpExpr need to be identifier/valuable gotclass com.alibaba.druid.sql.ast.expr.SQLAggregateExpr with value:com.alibaba.druid.sql.ast.expr.SQLAggregateExpr@e0b4ead1
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@1801588a
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:59:34.128 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
19:07:43.110 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472140740000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1472140740000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472140740000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "time" : {
              "terms" : {
                "field" : "time"
              },
              "aggregations" : {
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "tc" : {
              "max_bucket" : {
                "buckets_path" : [ "time>flow" ]
              }
            }
          }
        }
      }
    }
  }
}
19:07:43.626 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间509
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:50)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:44:06.654 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误
19:44:19.814 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1471363140000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1d",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1471363140000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
Failed to execute phase [query], all shards failed; shardFailures {[Em96UBHdRlmeBA7bEKpwEA][cdncsrt][0]: RemoteTransportException[[hz02-cs-app071234.hz02.ksyun.com][10.4.71.234:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdncsrt][1]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[bEWIBnctQ6C9-Nv1ScGpgQ][cdncsrt][2]: RemoteTransportException[[hz02-cs-app069181.hz02.ksyun.com][10.4.69.181:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[bv4EOhaPTiOf6ulDpvsViQ][cdncsrt][3]: RemoteTransportException[[hz02-cs-app069180.hz02.ksyun.com][10.4.69.180:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[bv4EOhaPTiOf6ulDpvsViQ][cdncsrt][4]: RemoteTransportException[[hz02-cs-app069180.hz02.ksyun.com][10.4.69.180:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[ecUC-lpCSy2KF4FCKmXhJw][cdncsrt][5]: RemoteTransportException[[hz02-cs-app069164.hz02.ksyun.com][10.4.69.164:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[JY7o4cUWRAeWM8mhXuYWFQ][cdncsrt][6]: RemoteTransportException[[hz02-cs-app071233.hz02.ksyun.com][10.4.71.233:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }{[bEWIBnctQ6C9-Nv1ScGpgQ][cdncsrt][7]: RemoteTransportException[[hz02-cs-app069181.hz02.ksyun.com][10.4.69.181:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]; }
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.onFirstPhaseResult(AbstractSearchAsyncAction.java:206)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:152)
	at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:46)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleException(MessageChannelHandler.java:212)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:202)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:136)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: SearchParseException[[extended_bounds.min][1472054400000] cannot be greater than [extended_bounds.max][1471363140000] for histogram aggregation [date_histogram(field=time,interval=1d,time_zone=+08:00,extendedBounds=1472054400000,1471363140000)]]
	at org.elasticsearch.search.aggregations.bucket.histogram.ExtendedBounds.processAndValidate(ExtendedBounds.java:58)
	at org.elasticsearch.search.aggregations.bucket.histogram.HistogramAggregator$Factory.doCreateInternal(HistogramAggregator.java:192)
	at org.elasticsearch.search.aggregations.bucket.histogram.HistogramAggregator$Factory.doCreateInternal(HistogramAggregator.java:147)
	at org.elasticsearch.search.aggregations.support.ValuesSourceAggregatorFactory.createInternal(ValuesSourceAggregatorFactory.java:64)
	at org.elasticsearch.search.aggregations.AggregatorFactory.create(AggregatorFactory.java:102)
	at org.elasticsearch.search.aggregations.AggregatorFactories.createTopLevelAggregators(AggregatorFactories.java:87)
	at org.elasticsearch.search.aggregations.AggregationPhase.preProcess(AggregationPhase.java:85)
	at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:111)
	at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:366)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:378)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:368)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:365)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	... 3 more
19:44:19.876 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
19:44:35.387 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "SUM(traffic)" : {
              "sum" : {
                "field" : "traffic"
              }
            },
            "SUM(times)" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
19:44:36.996 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间1596
19:44:51.793 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "time" : {
              "terms" : {
                "field" : "time"
              },
              "aggregations" : {
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "maxsum(traffic)" : {
              "max_bucket" : {
                "buckets_path" : [ "time>flow" ]
              }
            }
          }
        }
      }
    }
  }
}
19:44:53.210 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间1369
19:45:24.515 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472054400000,
                "to" : 1472399940000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "date_histogram(field=time,interval=1h,time_zone=+08:00,extendedBounds=1472054400000,1472399940000)" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472054400000,
          "max" : 1472399940000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "time" : {
              "terms" : {
                "field" : "time"
              },
              "aggregations" : {
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "time>flow" ]
              }
            }
          }
        }
      }
    }
  }
}
19:45:25.532 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间979
20:29:56.759         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 14:38:46 CST 2016]; root of context hierarchy
20:29:56.762         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
20:30:07,137 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
20:30:07,137 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
20:30:07,137 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
20:30:07,138 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
20:30:07,138 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
20:30:07,138 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
20:30:07,203 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
20:30:07,205 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
20:30:07,216 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
20:30:07,217 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
20:30:07,217 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
20:30:07,219 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
20:30:07,226 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
20:30:07,270 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
20:30:07,273 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
20:30:07,286 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
20:30:07,287 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
20:30:07,299 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
20:30:07,299 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
20:30:07,301 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Tue Sep 13 20:30:07 CST 2016
20:30:07,302 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
20:30:07,303 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0913.log
20:30:07,303 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
20:30:07,304 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
20:30:07,305 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
20:30:07,306 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
20:30:07,306 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
20:30:07,306 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
20:30:07,306 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
20:30:07,306 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
20:30:07,306 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
20:30:07,306 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
20:30:07,307 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

20:30:07.312             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

20:30:07.603             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 31696 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
20:30:07.642             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 20:30:07 CST 2016]; root of context hierarchy
20:30:08.166             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
20:30:08.331             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
20:30:08.396             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
20:30:08.462             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
20:30:08.706             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
20:30:08.832             main  INFO  o.a.c.c.StandardService Starting service Tomcat
20:30:08.833             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
20:30:08.945 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
20:30:08.945 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1303 ms
20:30:09.344 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
20:30:09.347 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
20:30:09.347 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
20:30:10.456             main  INFO      c.k.d.q.s.EsService es连接成功
20:30:10.519             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 20:30:07 CST 2016]; root of context hierarchy
20:30:10.586             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
20:30:10.587             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
20:30:10.588             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
20:30:10.606             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:30:10.606             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:30:10.643             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:30:10.696             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
20:30:10.720             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
20:30:10.726             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
20:30:10.732             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
20:30:10.748             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.342 seconds (JVM running for 3.982)
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi error
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
20:30:10.749             main  INFO c.k.dc.queryapi.QueryApi esService
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi messageConverters
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
20:30:10.750             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
20:30:10.751             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi queryApi
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi queryController
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi serverProperties
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi viewResolver
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
20:30:10.752             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
20:30:41.342 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
20:30:41.342 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
20:30:41.354 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 12 ms
20:30:41.535 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73400809"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473613200000,
                "to" : 1473613500000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473613200000,
          "max" : 1473613500000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "userid" : {
              "terms" : {
                "field" : "userid",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "maxsum(traffic)" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow" ]
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
20:30:41.635 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间36
21:30:53.453 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@5cf2eebd
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:30:53.457 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
21:31:10.245 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@422375b6
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:31:10.247 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误
21:31:14.495 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@3a54d7bf
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:31:14.497 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误
21:31:15.960 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@52403e50
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
21:31:15.962 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
17:23:12.338 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@2542c95e
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:23:12.347 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:53:28.477 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:54:52.752 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:57:50.076 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:58:32.309 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
17:59:47.074 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:16:54.878 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:22:27.633 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:28:28.170 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:33:08.918 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:07:31.375 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误
22:30:45.297 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService sql解析错误unknown field name : NULL
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@20f8c114
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:42)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
22:30:45.298 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
11:56:34.713 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
11:57:02.227 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
11:57:37.169 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController 查询错误
java.lang.NullPointerException
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblyIndex(SqlAssemblyUtil.java:51)
	at com.ksc.dc.queryapi.util.SqlAssemblyUtil.assemblySql(SqlAssemblyUtil.java:23)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:41)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
11:58:20.614 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误
12:07:34.582         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 13 20:30:07 CST 2016]; root of context hierarchy
12:07:34.585         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
12:07:45,921 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
12:07:45,921 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
12:07:45,922 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
12:07:45,923 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
12:07:45,923 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
12:07:45,923 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
12:07:46,133 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
12:07:46,135 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
12:07:46,179 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
12:07:46,179 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
12:07:46,179 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
12:07:46,184 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
12:07:46,191 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
12:07:46,283 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
12:07:46,289 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
12:07:46,317 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
12:07:46,319 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
12:07:46,324 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
12:07:46,324 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
12:07:46,330 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Tue Sep 20 12:07:46 CST 2016
12:07:46,331 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
12:07:46,333 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0920.log
12:07:46,333 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
12:07:46,341 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
12:07:46,343 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
12:07:46,343 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
12:07:46,343 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
12:07:46,351 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
12:07:46,351 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
12:07:46,351 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
12:07:46,351 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
12:07:46,351 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
12:07:46,359 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

12:07:46.367             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

12:07:46.855             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 21155 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
12:07:46.895             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 12:07:46 CST 2016]; root of context hierarchy
12:07:47.594             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
12:07:47.782             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
12:07:47.877             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
12:07:47.983             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
12:07:48.374             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
12:07:48.502             main  INFO  o.a.c.c.StandardService Starting service Tomcat
12:07:48.503             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
12:07:48.669 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
12:07:48.669 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1774 ms
12:07:49.469 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
12:07:49.473 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
12:07:49.473 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
12:07:51.316             main  INFO      c.k.d.q.s.EsService es连接成功
12:07:51.427             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 12:07:46 CST 2016]; root of context hierarchy
12:07:51.480             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
12:07:51.481             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
12:07:51.481             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
12:07:51.499             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
12:07:51.499             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
12:07:51.528             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
12:07:51.594             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
12:07:51.628             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
12:07:51.633             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
12:07:51.636             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
12:07:51.665             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 5.084 seconds (JVM running for 7.072)
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
12:07:51.666             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi error
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi esService
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi messageConverters
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
12:07:51.667             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
12:07:51.668             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi queryApi
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi queryController
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi serverProperties
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi viewResolver
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
12:07:51.669             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
12:08:11.308 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
12:08:11.308 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
12:08:11.320 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 12 ms
12:08:11.661 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "MAX" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "bd" : {
              "max" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:08:12.172 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间372
12:08:25.673 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "MAX" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "times" : {
              "terms" : {
                "field" : "times",
                "size" : 0
              },
              "aggregations" : {
                "bd" : {
                  "max" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
12:08:26.062 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间178
12:08:53.916 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            }
          }
        }
      }
    }
  }
}
12:08:54.744 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间798
12:10:18.184 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            }
          }
        }
      }
    }
  }
}
12:10:18.639 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间451
12:11:07.792 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService sql解析错误could not parse sqlBinaryOpExpr need to be identifier/valuable gotclass com.alibaba.druid.sql.ast.expr.SQLMethodInvokeExpr with value:maxsum(traffic)
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@2b4d51c
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
12:11:07.804 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误  sql解析错误[Ljava.lang.StackTraceElement;@2b4d51c
12:15:38.228 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService sql解析错误could not parse sqlBinaryOpExpr need to be identifier/valuable gotclass com.alibaba.druid.sql.ast.expr.SQLMethodInvokeExpr with value:maxsum(traffic)
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@487896ae
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
12:15:38.229 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误  sql解析错误[Ljava.lang.StackTraceElement;@487896ae
12:15:49.435 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "tarffic"
                  }
                }
              }
            },
            "bd1" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            }
          }
        }
      }
    }
  }
}
Failed to execute phase [query], all shards failed; shardFailures {[ecUC-lpCSy2KF4FCKmXhJw][cdn160901col][0]: RemoteTransportException[[hz02-cs-app069164.hz02.ksyun.com][10.4.69.164:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdncsrt][0]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[bEWIBnctQ6C9-Nv1ScGpgQ][cdn160901col][1]: RemoteTransportException[[hz02-cs-app069181.hz02.ksyun.com][10.4.69.181:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdncsrt][1]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[ecUC-lpCSy2KF4FCKmXhJw][cdn160901col][2]: RemoteTransportException[[hz02-cs-app069164.hz02.ksyun.com][10.4.69.164:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdncsrt][2]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdn160901col][3]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[Em96UBHdRlmeBA7bEKpwEA][cdncsrt][3]: RemoteTransportException[[hz02-cs-app071234.hz02.ksyun.com][10.4.71.234:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[Em96UBHdRlmeBA7bEKpwEA][cdn160901col][4]: RemoteTransportException[[hz02-cs-app071234.hz02.ksyun.com][10.4.71.234:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[bv4EOhaPTiOf6ulDpvsViQ][cdncsrt][4]: RemoteTransportException[[hz02-cs-app069180.hz02.ksyun.com][10.4.69.180:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[TfNBRKBeRGa2F1nXCvPdrQ][cdn160901col][5]: RemoteTransportException[[hz02-cs-app071229.hz02.ksyun.com][10.4.71.229:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[ecUC-lpCSy2KF4FCKmXhJw][cdncsrt][5]: RemoteTransportException[[hz02-cs-app069164.hz02.ksyun.com][10.4.69.164:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[bv4EOhaPTiOf6ulDpvsViQ][cdn160901col][6]: RemoteTransportException[[hz02-cs-app069180.hz02.ksyun.com][10.4.69.180:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[JY7o4cUWRAeWM8mhXuYWFQ][cdncsrt][6]: RemoteTransportException[[hz02-cs-app071233.hz02.ksyun.com][10.4.71.233:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[JY7o4cUWRAeWM8mhXuYWFQ][cdn160901col][7]: RemoteTransportException[[hz02-cs-app071233.hz02.ksyun.com][10.4.71.233:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }{[bEWIBnctQ6C9-Nv1ScGpgQ][cdncsrt][7]: RemoteTransportException[[hz02-cs-app069181.hz02.ksyun.com][10.4.69.181:9300][indices:data/read/search[phase/query]]]; nested: SearchParseException[failed to parse search source [{"from":0,"size":0,"query":{"bool":{"must":{"bool":{"must":[{"term":{"level":"E"}},{"bool":{"should":[{"match":{"method":{"query":"GET","type":"phrase"}}},{"match":{"method":{"query":"HEAD","type":"phrase"}}}]}},{"bool":{"should":[{"match":{"code":{"query":"200","type":"phrase"}}},{"match":{"code":{"query":"206","type":"phrase"}}},{"match":{"code":{"query":"304","type":"phrase"}}}]}},{"term":{"userid":"73405420"}},{"range":{"time":{"from":1472734800000,"to":1472735700000,"include_lower":true,"include_upper":true}}}]}}}},"_source":{"includes":["maxsum","maxsum"],"excludes":[]},"aggregations":{"time":{"date_histogram":{"field":"time","interval":"5m","min_doc_count":0,"time_zone":"+08:00","format":"yyyy-MM-dd HH:mm:ss","extended_bounds":{"min":1472734800000,"max":1472735700000}},"aggregations":{"userid":{"terms":{"field":"userid","size":0},"aggregations":{"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"traffic"}}}},"bd":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}},"real_time":{"terms":{"field":"time","size":0},"aggregations":{"flow_sunmaolin":{"sum":{"field":"tarffic"}}}},"bd1":{"max_bucket":{"buckets_path":["real_time>flow_sunmaolin"]}}}}}}}}]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]]; }
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.onFirstPhaseResult(AbstractSearchAsyncAction.java:206)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction$1.onFailure(AbstractSearchAsyncAction.java:152)
	at org.elasticsearch.action.ActionListenerResponseHandler.handleException(ActionListenerResponseHandler.java:46)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleException(MessageChannelHandler.java:212)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handlerResponseError(MessageChannelHandler.java:202)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:136)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: NotSerializableExceptionWrapper[: Two sibling aggregations cannot have the same name: [real_time]]; nested: IllegalArgumentException[Two sibling aggregations cannot have the same name: [real_time]];
	at org.elasticsearch.ElasticsearchException.guessRootCauses(ElasticsearchException.java:386)
	at org.elasticsearch.action.search.SearchPhaseExecutionException.guessRootCauses(SearchPhaseExecutionException.java:152)
	at org.elasticsearch.action.search.SearchPhaseExecutionException.getCause(SearchPhaseExecutionException.java:99)
	at org.elasticsearch.ElasticsearchException.writeTo(ElasticsearchException.java:226)
	at org.elasticsearch.action.search.SearchPhaseExecutionException.writeTo(SearchPhaseExecutionException.java:64)
	at org.elasticsearch.common.io.stream.StreamOutput.writeThrowable(StreamOutput.java:564)
	at org.elasticsearch.ElasticsearchException.writeTo(ElasticsearchException.java:226)
	at org.elasticsearch.transport.ActionTransportException.writeTo(ActionTransportException.java:64)
	at org.elasticsearch.common.io.stream.StreamOutput.writeThrowable(StreamOutput.java:564)
	at org.elasticsearch.transport.netty.NettyTransportChannel.sendResponse(NettyTransportChannel.java:120)
	at org.elasticsearch.transport.DelegatingTransportChannel.sendResponse(DelegatingTransportChannel.java:68)
	at org.elasticsearch.transport.RequestHandlerRegistry$TransportChannelWrapper.sendResponse(RequestHandlerRegistry.java:146)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler$1.onFailure(HandledTransportAction.java:74)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.raiseEarlyFailure(AbstractSearchAsyncAction.java:294)
	... 28 more
Caused by: java.lang.IllegalArgumentException: Two sibling aggregations cannot have the same name: [real_time]
	at org.elasticsearch.search.aggregations.AggregatorFactories$Builder.addAggregator(AggregatorFactories.java:142)
	at org.elasticsearch.search.aggregations.AggregatorParsers.parseAggregators(AggregatorParsers.java:224)
	at org.elasticsearch.search.aggregations.AggregatorParsers.parseAggregators(AggregatorParsers.java:176)
	at org.elasticsearch.search.aggregations.AggregatorParsers.parseAggregators(AggregatorParsers.java:176)
	at org.elasticsearch.search.aggregations.AggregatorParsers.parseAggregators(AggregatorParsers.java:103)
	at org.elasticsearch.search.aggregations.AggregationParseElement.parse(AggregationParseElement.java:60)
	at org.elasticsearch.search.SearchService.parseSource(SearchService.java:838)
	at org.elasticsearch.search.SearchService.createContext(SearchService.java:654)
	at org.elasticsearch.search.SearchService.createAndPutContext(SearchService.java:620)
	at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:371)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:368)
	at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:365)
	at org.elasticsearch.transport.TransportRequestHandler.messageReceived(TransportRequestHandler.java:33)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:300)
	at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:37)
	... 3 more
12:15:49.553 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误  all shards failed
12:16:11.234 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic*1.1"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            }
          }
        }
      }
    }
  }
}
12:16:11.554 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间315
12:17:09.793 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            }
          }
        }
      }
    }
  }
}
12:17:10.050 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间254
12:17:37.912 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
12:17:38.450 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间534
12:18:16.291 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:18:16.732 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间437
12:58:07.032 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:58:07.078 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间42
12:58:08.579 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:58:08.610 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间27
12:58:09.675 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:58:09.715 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间37
12:58:10.636 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:58:10.665 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间26
12:58:12.164 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:58:12.197 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间31
12:59:31.685 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:59:31.952 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间264
12:59:41.713 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
12:59:41.741 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间25
13:00:14.435 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM", "region" ],
    "excludes" : [ ]
  },
  "fields" : "region",
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 3
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:65)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
13:00:14.468 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间29
13:00:26.072 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:00:26.406 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间295
13:01:11.241 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:11.543 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间280
13:01:13.300 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:13.369 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间45
13:01:14.774 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:14.867 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间72
13:01:16.125 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:16.184 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间39
13:01:17.343 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:17.405 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间42
13:01:18.743 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:18.801 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间42
13:01:20.476 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:20.536 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间41
13:01:21.692 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:21.763 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间51
13:01:22.796 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:22.858 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间43
13:01:23.892 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:23.954 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间46
13:01:48.961 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:49.013 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间34
13:01:51.754 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:01:51.812 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间38
13:02:00.471 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:02:00.555 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间67
13:02:05.077 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:02:05.144 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间49
13:02:06.610 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:02:06.674 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间48
13:02:08.098 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:02:08.153 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间42
13:02:34.970 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "region" : {
              "terms" : {
                "field" : "region",
                "size" : 0
              },
              "aggregations" : {
                "real_time" : {
                  "terms" : {
                    "field" : "time",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow_sunmaolin" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                },
                "bd" : {
                  "max_bucket" : {
                    "buckets_path" : [ "real_time>flow_sunmaolin" ]
                  }
                },
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
13:02:35.023 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间39
13:02:46.789 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:02:46.821 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间30
13:03:11.882 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:03:11.910 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间25
13:03:32.410 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:03:32.437 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间26
13:04:00.624 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73405420"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1472734800000,
                "to" : 1472735700000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1472734800000,
          "max" : 1472735700000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:04:00.649 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间24
13:43:21.813 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:43:22.264 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间449
13:55:16.224 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
13:55:16.249 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间23
14:02:28.284 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bd" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:02:28.590 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间305
14:23:27.249 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:23:27.272 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间20
com.alibaba.druid.sql.parser.EOFParserException: EOF
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:545)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.parseSelectGroupByItem(MySqlExprParser.java:853)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.parseGroupBy(MySqlSelectParser.java:238)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:136)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:24:09.422 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误  EOF
14:24:21.281 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "bandwidth" : {
          "terms" : {
            "field" : "bandwidth",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:24:21.601 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间318
14:24:40.720 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473609600000,
                "to" : 1473610560000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473609600000,
          "max" : 1473610560000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:24:40.740 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间17
14:31:27.634 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "role" : "Cache"
            }
          }, {
            "term" : {
              "mode" : "pull"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:31:27.853 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间217
14:38:22.729 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406364"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473868800000,
                    "to" : 1473869760000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:38:24.898 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间2141
com.alibaba.druid.sql.parser.ParserException: syntax error, expect RPAREN, actual GROUP group
	at com.alibaba.druid.sql.parser.SQLExprParser.accept(SQLExprParser.java:1496)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:206)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitXor(SQLExprParser.java:147)
	at com.alibaba.druid.sql.parser.SQLExprParser.multiplicative(SQLExprParser.java:163)
	at com.alibaba.druid.sql.parser.SQLExprParser.additive(SQLExprParser.java:1124)
	at com.alibaba.druid.sql.parser.SQLExprParser.shift(SQLExprParser.java:1152)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitAnd(SQLExprParser.java:1030)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitOr(SQLExprParser.java:1044)
	at com.alibaba.druid.sql.parser.SQLExprParser.equality(SQLExprParser.java:1059)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:1221)
	at com.alibaba.druid.sql.parser.SQLExprParser.andRest(SQLExprParser.java:1183)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:140)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.expr(SQLSelectParser.java:435)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:237)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:134)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:39:51.347 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误  syntax error, expect RPAREN, actual GROUP group
com.alibaba.druid.sql.parser.ParserException: syntax error, expect RPAREN, actual GROUP group
	at com.alibaba.druid.sql.parser.SQLExprParser.accept(SQLExprParser.java:1496)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:206)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitXor(SQLExprParser.java:147)
	at com.alibaba.druid.sql.parser.SQLExprParser.multiplicative(SQLExprParser.java:163)
	at com.alibaba.druid.sql.parser.SQLExprParser.additive(SQLExprParser.java:1124)
	at com.alibaba.druid.sql.parser.SQLExprParser.shift(SQLExprParser.java:1152)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitAnd(SQLExprParser.java:1030)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitOr(SQLExprParser.java:1044)
	at com.alibaba.druid.sql.parser.SQLExprParser.equality(SQLExprParser.java:1059)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:1221)
	at com.alibaba.druid.sql.parser.SQLExprParser.and(SQLExprParser.java:1175)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.orRest(MySqlExprParser.java:585)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:141)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.expr(SQLSelectParser.java:435)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:237)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:134)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:40:36.423 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误  syntax error, expect RPAREN, actual GROUP group
com.alibaba.druid.sql.parser.ParserException: syntax error, expect RPAREN, actual GROUP group
	at com.alibaba.druid.sql.parser.SQLExprParser.accept(SQLExprParser.java:1496)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:206)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitXor(SQLExprParser.java:147)
	at com.alibaba.druid.sql.parser.SQLExprParser.multiplicative(SQLExprParser.java:163)
	at com.alibaba.druid.sql.parser.SQLExprParser.additive(SQLExprParser.java:1124)
	at com.alibaba.druid.sql.parser.SQLExprParser.shift(SQLExprParser.java:1152)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitAnd(SQLExprParser.java:1030)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitOr(SQLExprParser.java:1044)
	at com.alibaba.druid.sql.parser.SQLExprParser.equality(SQLExprParser.java:1059)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:1221)
	at com.alibaba.druid.sql.parser.SQLExprParser.and(SQLExprParser.java:1175)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.orRest(MySqlExprParser.java:585)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:141)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.expr(SQLSelectParser.java:435)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:237)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:134)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:40:52.270 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误  syntax error, expect RPAREN, actual GROUP group
com.alibaba.druid.sql.parser.ParserException: syntax error, expect RPAREN, actual GROUP group
	at com.alibaba.druid.sql.parser.SQLExprParser.accept(SQLExprParser.java:1496)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:206)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitXor(SQLExprParser.java:147)
	at com.alibaba.druid.sql.parser.SQLExprParser.multiplicative(SQLExprParser.java:163)
	at com.alibaba.druid.sql.parser.SQLExprParser.additive(SQLExprParser.java:1124)
	at com.alibaba.druid.sql.parser.SQLExprParser.shift(SQLExprParser.java:1152)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitAnd(SQLExprParser.java:1030)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitOr(SQLExprParser.java:1044)
	at com.alibaba.druid.sql.parser.SQLExprParser.equality(SQLExprParser.java:1059)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:1221)
	at com.alibaba.druid.sql.parser.SQLExprParser.and(SQLExprParser.java:1175)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.orRest(MySqlExprParser.java:585)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:141)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.expr(SQLSelectParser.java:435)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:237)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:134)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
14:41:29.016 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误  syntax error, expect RPAREN, actual GROUP group
14:45:35.785 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
14:45:36.134 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间348
14:54:30.304 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:54:30.319 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间13
14:54:44.420 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "domain" : {
              "terms" : {
                "field" : "domain",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:54:44.435 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间13
14:54:51.234 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:54:51.238 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间2
14:55:09.655 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:55:09.672 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间15
14:55:36.998 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:55:37.001 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间2
14:56:12.411 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:56:12.418 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间7
14:56:27.384 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "m1time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:56:27.386 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间1
14:56:39.756 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473954900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "m1time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473954900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:56:40.131 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间364
14:56:55.428 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473954900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473954900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
14:56:56.271 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间832
14:57:22.321 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473954900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473954900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "hlsid" : {
              "terms" : {
                "field" : "hlsid",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:57:24.598 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间2266
14:57:57.338 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473954900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473954900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "sname" : {
              "terms" : {
                "field" : "sname",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:57:57.964 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间613
14:58:33.680 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73402418"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473954900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "m1time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473954900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "hlsid" : {
              "terms" : {
                "field" : "hlsid",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
14:58:34.027 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间335
15:11:10.229 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
15:11:10.517 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间286
15:39:01.764 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1468944000000,
                "to" : 1469030400000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1468944000000,
          "max" : 1469030400000
        }
      },
      "aggregations" : {
        "areaName" : {
          "terms" : {
            "field" : "areaName",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160720col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
15:39:01.769 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误  no such index
15:39:04.456 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1468944000000,
                "to" : 1469030400000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1468944000000,
          "max" : 1469030400000
        }
      },
      "aggregations" : {
        "areaName" : {
          "terms" : {
            "field" : "areaName",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160720col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
15:39:04.459 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController 查询错误  no such index
15:39:20.721 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1468944000000,
                "to" : 1469030400000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1468944000000,
          "max" : 1469030400000
        }
      },
      "aggregations" : {
        "areaName" : {
          "terms" : {
            "field" : "areaName",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160720col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
15:39:20.725 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误  no such index
15:39:30.711 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1468944000000,
                "to" : 1469030400000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1468944000000,
          "max" : 1469030400000
        }
      },
      "aggregations" : {
        "areaName" : {
          "terms" : {
            "field" : "areaName",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160720col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
15:39:30.716 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误  no such index
15:41:26.260 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1468944000000,
                "to" : 1469030400000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1468944000000,
          "max" : 1469030400000
        }
      },
      "aggregations" : {
        "remoteipstate" : {
          "terms" : {
            "field" : "remoteipstate",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
[cdn160720col] IndexNotFoundException[no such index]
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver$WildcardExpressionResolver.resolve(IndexNameExpressionResolver.java:585)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:133)
	at org.elasticsearch.cluster.metadata.IndexNameExpressionResolver.concreteIndices(IndexNameExpressionResolver.java:113)
	at org.elasticsearch.action.search.AbstractSearchAsyncAction.<init>(AbstractSearchAsyncAction.java:99)
	at org.elasticsearch.action.search.SearchQueryThenFetchAsyncAction.<init>(SearchQueryThenFetchAsyncAction.java:53)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:93)
	at org.elasticsearch.action.search.TransportSearchAction.doExecute(TransportSearchAction.java:47)
	at org.elasticsearch.action.support.TransportAction.doExecute(TransportAction.java:149)
	at org.elasticsearch.action.support.TransportAction.execute(TransportAction.java:137)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:61)
	at org.elasticsearch.action.support.HandledTransportAction$TransportHandler.messageReceived(HandledTransportAction.java:51)
	at org.elasticsearch.transport.RequestHandlerRegistry.processMessageReceived(RequestHandlerRegistry.java:75)
	at org.elasticsearch.transport.netty.MessageChannelHandler.handleRequest(MessageChannelHandler.java:245)
	at org.elasticsearch.transport.netty.MessageChannelHandler.messageReceived(MessageChannelHandler.java:114)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:462)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.callDecode(FrameDecoder.java:443)
	at org.jboss.netty.handler.codec.frame.FrameDecoder.messageReceived(FrameDecoder.java:303)
	at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)
	at org.elasticsearch.common.netty.OpenChannelsHandler.handleUpstream(OpenChannelsHandler.java:75)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
	at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
	at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
	at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:108)
	at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337)
	at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:89)
	at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)
	at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
	at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
15:41:26.263 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误  no such index
15:41:50.851 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "static.flv.uuzuonline.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474300800000,
                "to" : 1474344000000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474300800000,
          "max" : 1474344000000
        }
      },
      "aggregations" : {
        "remoteipstate" : {
          "terms" : {
            "field" : "remoteipstate",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "traffic"
              }
            }
          }
        }
      }
    }
  }
}
15:41:51.263 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间402
15:48:18.535         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 12:07:46 CST 2016]; root of context hierarchy
15:48:18.537         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
15:48:28,885 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
15:48:28,885 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
15:48:28,885 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
15:48:28,886 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
15:48:28,886 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
15:48:28,886 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
15:48:28,952 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
15:48:28,954 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
15:48:28,966 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
15:48:28,966 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
15:48:28,966 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
15:48:28,969 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
15:48:28,975 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
15:48:29,016 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
15:48:29,019 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
15:48:29,036 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
15:48:29,037 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
15:48:29,040 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
15:48:29,040 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
15:48:29,043 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Tue Sep 20 15:48:29 CST 2016
15:48:29,044 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
15:48:29,044 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0920.log
15:48:29,044 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
15:48:29,045 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
15:48:29,047 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
15:48:29,047 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
15:48:29,047 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
15:48:29,047 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
15:48:29,047 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
15:48:29,047 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
15:48:29,047 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
15:48:29,047 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
15:48:29,048 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

15:48:29.052             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

15:48:29.295             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 19317 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
15:48:29.322             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 15:48:29 CST 2016]; root of context hierarchy
15:48:29.753             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
15:48:29.886             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
15:48:29.921             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
15:48:29.971             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
15:48:30.187             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
15:48:30.272             main  INFO  o.a.c.c.StandardService Starting service Tomcat
15:48:30.273             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
15:48:30.354 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
15:48:30.354 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1032 ms
15:48:30.856 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
15:48:30.859 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
15:48:30.859 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
15:48:31.779             main  INFO      c.k.d.q.s.EsService es连接成功
15:48:31.858             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 15:48:29 CST 2016]; root of context hierarchy
15:48:31.909             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
15:48:31.911             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
15:48:31.911             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
15:48:31.929             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
15:48:31.929             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
15:48:31.954             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
15:48:32.003             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
15:48:32.026             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
15:48:32.031             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
15:48:32.033             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
15:48:32.045             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 2.917 seconds (JVM running for 3.498)
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi error
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi esService
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
15:48:32.046             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi messageConverters
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
15:48:32.047             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi queryApi
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi queryController
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
15:48:32.048             main  INFO c.k.dc.queryapi.QueryApi serverProperties
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi viewResolver
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
15:48:32.049             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
16:25:27.893         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 15:48:29 CST 2016]; root of context hierarchy
16:25:27.894         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
16:25:38,210 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
16:25:38,210 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
16:25:38,210 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
16:25:38,210 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
16:25:38,210 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
16:25:38,210 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
16:25:38,271 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
16:25:38,272 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
16:25:38,281 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
16:25:38,281 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
16:25:38,281 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
16:25:38,284 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
16:25:38,289 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
16:25:38,324 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
16:25:38,326 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
16:25:38,337 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
16:25:38,338 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
16:25:38,340 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
16:25:38,340 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
16:25:38,342 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Tue Sep 20 16:25:38 CST 2016
16:25:38,343 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
16:25:38,343 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0920.log
16:25:38,344 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
16:25:38,344 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
16:25:38,345 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
16:25:38,345 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
16:25:38,345 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
16:25:38,345 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
16:25:38,346 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
16:25:38,346 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
16:25:38,346 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
16:25:38,346 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
16:25:38,346 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

16:25:38.349             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

16:25:38.537             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 4228 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
16:25:38.559             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 16:25:38 CST 2016]; root of context hierarchy
16:25:38.956             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
16:25:39.082             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
16:25:39.119             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
16:25:39.166             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
16:25:39.371             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
16:25:39.447             main  INFO  o.a.c.c.StandardService Starting service Tomcat
16:25:39.447             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
16:25:39.520 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
16:25:39.521 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 962 ms
16:25:39.845 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
16:25:39.847 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
16:25:39.848 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
16:25:40.860             main  INFO      c.k.d.q.s.EsService es连接成功
16:25:40.919             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 16:25:38 CST 2016]; root of context hierarchy
16:25:40.956             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
16:25:40.957             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
16:25:40.957             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
16:25:40.974             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
16:25:40.974             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
16:25:40.995             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
16:25:41.035             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
16:25:41.054             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
16:25:41.059             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
16:25:41.060             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
16:25:41.069             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 2.661 seconds (JVM running for 3.166)
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi error
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi esService
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi messageConverters
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
16:25:41.070             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
16:25:41.071             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi queryApi
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi queryController
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi serverProperties
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi viewResolver
16:25:41.072             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
16:25:41.073             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
16:29:28.422 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
16:29:28.422 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
16:29:28.435 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 13 ms
16:29:28.624 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406054"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1474171200000,
                    "to" : 1474214100000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474171200000,
          "max" : 1474214100000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "domain" : {
              "terms" : {
                "field" : "domain",
                "size" : 0
              },
              "aggregations" : {
                "area" : {
                  "terms" : {
                    "field" : "area",
                    "missing" : "CN",
                    "size" : 0
                  },
                  "aggregations" : {
                    "real_time" : {
                      "terms" : {
                        "field" : "time",
                        "size" : 0
                      },
                      "aggregations" : {
                        "flow_sunmaolin" : {
                          "sum" : {
                            "field" : "traffic"
                          }
                        }
                      }
                    },
                    "bandwidth" : {
                      "max_bucket" : {
                        "buckets_path" : [ "real_time>flow_sunmaolin" ]
                      }
                    },
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
16:29:34.343 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间5032
16:37:20.878 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
16:37:21.287 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间404
java.lang.RuntimeException: 版本错误，现阶段版本为2.0.0
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:73)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:44)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
16:40:03.308 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误  版本错误，现阶段版本为2.0.0
16:40:22.698 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "2h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "code" : {
              "terms" : {
                "field" : "code",
                "size" : 0
              },
              "aggregations" : {
                "status" : {
                  "terms" : {
                    "field" : "status",
                    "size" : 0
                  },
                  "aggregations" : {
                    "count" : {
                      "sum" : {
                        "field" : "times"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
16:40:22.788 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间87
17:48:14.589 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406054"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1474171200000,
                    "to" : 1474214100000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474171200000,
          "max" : 1474214100000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "domain" : {
              "terms" : {
                "field" : "domain",
                "size" : 0
              },
              "aggregations" : {
                "area" : {
                  "terms" : {
                    "field" : "area",
                    "missing" : "CN",
                    "size" : 0
                  },
                  "aggregations" : {
                    "real_time" : {
                      "terms" : {
                        "field" : "time",
                        "size" : 0
                      },
                      "aggregations" : {
                        "flow_sunmaolin" : {
                          "sum" : {
                            "field" : "traffic"
                          }
                        }
                      }
                    },
                    "bandwidth" : {
                      "max_bucket" : {
                        "buckets_path" : [ "real_time>flow_sunmaolin" ]
                      }
                    },
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
17:48:18.819 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间3807
18:19:19.787 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "2h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:19:20.052 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间262
18:19:48.057 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:19:48.312 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间252
com.alibaba.druid.sql.parser.ParserException: illegal sql expr : select sum(times) count from cdn160908col/wide,cdncsrt where level='E' and status in('20') method in ('GET','HEAD') and userid='73406303' and domain='apk1.cdn.anzhi.com' and time between 1473264000000 and 1473264960000 group by date_histogram(field='time',alias='time','interval'='5m','time_zone'='+08:00','extendedBounds'='1473264000000,1473264960000'),code,status
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
18:43:46.964 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误  illegal sql expr : select sum(times) count from cdn160908col/wide,cdncsrt where level='E' and status in('20') method in ('GET','HEAD') and userid='73406303' and domain='apk1.cdn.anzhi.com' and time between 1473264000000 and 1473264960000 group by date_histogram(field='time',alias='time','interval'='5m','time_zone'='+08:00','extendedBounds'='1473264000000,1473264960000'),code,status
18:43:53.806 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : {
                "match" : {
                  "status" : {
                    "query" : "20",
                    "type" : "phrase"
                  }
                }
              }
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:43:53.844 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间37
18:43:59.640 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : {
                "match" : {
                  "status" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:43:59.646 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间4
18:44:14.712 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "status" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "status" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:44:14.717 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间3
18:44:33.313 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:44:33.565 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间250
18:44:58.748 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "status" : {
                    "query" : 200,
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "status" : {
                    "query" : 206,
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:44:58.754 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间4
18:45:08.184 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "term" : {
              "status" : 200
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:45:08.188 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间2
18:45:17.097 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "term" : {
              "status" : "200"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:45:17.351 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间251
18:45:41.961 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:45:42.252 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间290
18:45:54.318 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "bool" : {
              "should" : {
                "match" : {
                  "code" : {
                    "query" : "20",
                    "type" : "phrase"
                  }
                }
              }
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
18:45:54.599 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间278
19:08:48.237 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService sql解析错误Failed to parse SqlExpression of type class com.alibaba.druid.sql.ast.expr.SQLBinaryOpExpr. expression value: ‘2 % ’
java.lang.Exception: sql解析错误[Ljava.lang.StackTraceElement;@11ba1f9b
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:69)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:08:48.240 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误  sql解析错误[Ljava.lang.StackTraceElement;@11ba1f9b
19:09:01.773 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
19:09:02.032 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间257
19:09:21.127 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "wildcard" : {
              "code" : "2*"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
19:09:21.203 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间73
19:11:10.727 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "wildcard" : {
              "code" : "2*"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "status" : {
          "terms" : {
            "field" : "status",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
19:11:11.243 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间513
19:12:04.521 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "wildcard" : {
              "code" : "2*"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "status" : {
          "terms" : {
            "field" : "status",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
19:12:04.899 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间377
com.alibaba.druid.sql.parser.ParserException: ERROR. token : FROM, pos : 29
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.parser.SQLExprParser.parseSelectItem(SQLExprParser.java:1787)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseSelectList(SQLSelectParser.java:275)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:18:53.847 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : FROM, pos : 29
com.alibaba.druid.sql.parser.ParserException: ERROR. token : FROM, pos : 29
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.parser.SQLExprParser.parseSelectItem(SQLExprParser.java:1787)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseSelectList(SQLSelectParser.java:275)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:19:09.970 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : FROM, pos : 29
com.alibaba.druid.sql.parser.ParserException: ERROR. token : FROM, pos : 29
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.parser.SQLExprParser.parseSelectItem(SQLExprParser.java:1787)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseSelectList(SQLSelectParser.java:275)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
19:19:21.432 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : FROM, pos : 29
com.alibaba.druid.sql.parser.ParserException: ERROR. token : FROM, pos : 29
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.parser.SQLExprParser.parseSelectItem(SQLExprParser.java:1787)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseSelectList(SQLSelectParser.java:275)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
20:09:19.545 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : FROM, pos : 29
com.alibaba.druid.sql.parser.ParserException: ERROR. token : FROM, pos : 29
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at com.alibaba.druid.sql.parser.SQLExprParser.parseSelectItem(SQLExprParser.java:1787)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseSelectList(SQLSelectParser.java:275)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
20:09:45.224 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : FROM, pos : 29
20:09:52.049 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "wildcard" : {
              "code" : "2*"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "status" : {
          "terms" : {
            "field" : "status",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
20:09:52.399 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间347
22:03:42.321 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "term" : {
              "userid" : "73406364"
            }
          }, {
            "bool" : {
              "should" : [ {
                "bool" : {
                  "must" : [ {
                    "term" : {
                      "mode" : "pull"
                    }
                  }, {
                    "term" : {
                      "role" : "Cache"
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "must" : [ {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "method" : {
                            "query" : "GET",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "method" : {
                            "query" : "HEAD",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  }, {
                    "bool" : {
                      "should" : [ {
                        "match" : {
                          "code" : {
                            "query" : "200",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "206",
                            "type" : "phrase"
                          }
                        }
                      }, {
                        "match" : {
                          "code" : {
                            "query" : "304",
                            "type" : "phrase"
                          }
                        }
                      } ]
                    }
                  } ]
                }
              } ]
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473868800000,
                "to" : 1473869760000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473868800000,
          "max" : 1473869760000
        }
      },
      "aggregations" : {
        "userid" : {
          "terms" : {
            "field" : "userid",
            "size" : 0
          },
          "aggregations" : {
            "real_time" : {
              "terms" : {
                "field" : "time",
                "size" : 0
              },
              "aggregations" : {
                "flow_sunmaolin" : {
                  "sum" : {
                    "field" : "downTraffic"
                  }
                }
              }
            },
            "bandwidth" : {
              "max_bucket" : {
                "buckets_path" : [ "real_time>flow_sunmaolin" ]
              }
            },
            "count" : {
              "sum" : {
                "field" : "times"
              }
            },
            "flow" : {
              "sum" : {
                "field" : "downTraffic"
              }
            }
          }
        }
      }
    }
  }
}
22:03:42.769 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间446
10:15:01.671         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Tue Sep 20 16:25:38 CST 2016]; root of context hierarchy
10:15:01.675         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
10:33:15,985 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
10:33:15,985 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
10:33:15,986 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
10:33:15,986 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
10:33:15,986 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
10:33:15,986 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
10:33:16,048 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
10:33:16,050 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
10:33:16,062 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
10:33:16,062 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
10:33:16,062 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
10:33:16,064 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
10:33:16,071 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
10:33:16,117 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
10:33:16,119 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
10:33:16,133 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
10:33:16,134 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
10:33:16,137 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
10:33:16,137 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
10:33:16,140 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Wed Sep 21 10:33:16 CST 2016
10:33:16,141 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
10:33:16,142 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0921.log
10:33:16,142 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
10:33:16,147 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
10:33:16,149 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
10:33:16,149 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
10:33:16,149 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
10:33:16,149 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
10:33:16,150 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
10:33:16,150 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
10:33:16,150 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
10:33:16,150 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
10:33:16,150 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

10:33:16.155             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

10:33:16.382             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 3863 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
10:33:16.406             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Wed Sep 21 10:33:16 CST 2016]; root of context hierarchy
10:33:16.820             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
10:33:16.950             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
10:33:16.986             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
10:33:17.041             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
10:33:17.263             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
10:33:17.348             main  INFO  o.a.c.c.StandardService Starting service Tomcat
10:33:17.349             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
10:33:17.445 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
10:33:17.445 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1039 ms
10:33:18.033 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
10:33:18.036 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
10:33:18.037 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
10:33:19.063             main  INFO      c.k.d.q.s.EsService es连接成功
10:33:19.134             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Wed Sep 21 10:33:16 CST 2016]; root of context hierarchy
10:33:19.179             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
10:33:19.180             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
10:33:19.181             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
10:33:19.198             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
10:33:19.199             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
10:33:19.228             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
10:33:19.274             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
10:33:19.296             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
10:33:19.302             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
10:33:19.304             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
10:33:19.315             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.082 seconds (JVM running for 3.661)
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi error
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi esService
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
10:33:19.316             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi messageConverters
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
10:33:19.317             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi queryApi
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi queryController
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi serverProperties
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
10:33:19.318             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi viewResolver
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
10:33:19.319             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
10:33:38.925 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
10:33:38.925 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
10:33:38.938 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 13 ms
10:33:39.142 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "term" : {
                  "domain" : "apk1.cdn.anzhi.com"
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteprovince" : {
                  "terms" : {
                    "field" : "remoteprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "real_time" : {
                      "terms" : {
                        "field" : "time",
                        "size" : 0
                      },
                      "aggregations" : {
                        "flow_sunmaolin" : {
                          "sum" : {
                            "field" : "traffic"
                          }
                        }
                      }
                    },
                    "bandwidth" : {
                      "max_bucket" : {
                        "buckets_path" : [ "real_time>flow_sunmaolin" ]
                      }
                    },
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:33:39.494 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间287
java.lang.IndexOutOfBoundsException: toIndex = 2
	at java.util.ArrayList.subListRangeCheck(ArrayList.java:1004)
	at java.util.ArrayList.subList(ArrayList.java:996)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:33:39.496 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误  toIndex = 2
10:34:09.943 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "term" : {
                  "domain" : "apk1.cdn.anzhi.com"
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteprovince" : {
                  "terms" : {
                    "field" : "remoteprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "real_time" : {
                      "terms" : {
                        "field" : "time",
                        "size" : 0
                      },
                      "aggregations" : {
                        "flow_sunmaolin" : {
                          "sum" : {
                            "field" : "traffic"
                          }
                        }
                      }
                    },
                    "bandwidth" : {
                      "max_bucket" : {
                        "buckets_path" : [ "real_time>flow_sunmaolin" ]
                      }
                    },
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:34:10.214 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间268
10:34:27.425 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "maxsum", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteprovince" : {
                  "terms" : {
                    "field" : "remoteprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "real_time" : {
                      "terms" : {
                        "field" : "time",
                        "size" : 0
                      },
                      "aggregations" : {
                        "flow_sunmaolin" : {
                          "sum" : {
                            "field" : "traffic"
                          }
                        }
                      }
                    },
                    "bandwidth" : {
                      "max_bucket" : {
                        "buckets_path" : [ "real_time>flow_sunmaolin" ]
                      }
                    },
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:34:27.859 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间371
10:34:39.697 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteprovince" : {
                  "terms" : {
                    "field" : "remoteprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:34:39.860 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间144
10:34:55.106 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteipprovince" : {
                  "terms" : {
                    "field" : "remoteipprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:34:55.598 http-nio-9998-exec-5  INFO      c.k.d.q.s.EsService es查询时间311
10:35:10.337 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "should" : [ {
            "bool" : {
              "must" : [ {
                "term" : {
                  "level" : "E"
                }
              }, {
                "term" : {
                  "userid" : "73406303"
                }
              }, {
                "term" : {
                  "mode" : "pull"
                }
              }, {
                "term" : {
                  "role" : "Cache"
                }
              } ]
            }
          }, {
            "bool" : {
              "must" : [ {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "method" : {
                        "query" : "GET",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "method" : {
                        "query" : "HEAD",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "bool" : {
                  "should" : [ {
                    "match" : {
                      "code" : {
                        "query" : "200",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "206",
                        "type" : "phrase"
                      }
                    }
                  }, {
                    "match" : {
                      "code" : {
                        "query" : "304",
                        "type" : "phrase"
                      }
                    }
                  } ]
                }
              }, {
                "range" : {
                  "time" : {
                    "from" : 1473264000000,
                    "to" : 1473264960000,
                    "include_lower" : true,
                    "include_upper" : true
                  }
                }
              } ]
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "remoteipprovince" : {
                  "terms" : {
                    "field" : "remoteipprovince",
                    "size" : 0
                  },
                  "aggregations" : {
                    "flow" : {
                      "sum" : {
                        "field" : "traffic"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:35:10.873 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间429
com.alibaba.druid.sql.parser.ParserException: ERROR. token : AND, pos : 87
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:555)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitXor(SQLExprParser.java:147)
	at com.alibaba.druid.sql.parser.SQLExprParser.multiplicative(SQLExprParser.java:163)
	at com.alibaba.druid.sql.parser.SQLExprParser.additive(SQLExprParser.java:1124)
	at com.alibaba.druid.sql.parser.SQLExprParser.shift(SQLExprParser.java:1152)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitAnd(SQLExprParser.java:1030)
	at com.alibaba.druid.sql.parser.SQLExprParser.bitOr(SQLExprParser.java:1044)
	at com.alibaba.druid.sql.parser.SQLExprParser.equality(SQLExprParser.java:1059)
	at com.alibaba.druid.sql.parser.SQLExprParser.relational(SQLExprParser.java:1221)
	at com.alibaba.druid.sql.parser.SQLExprParser.andRest(SQLExprParser.java:1183)
	at com.alibaba.druid.sql.parser.SQLExprParser.exprRest(SQLExprParser.java:140)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:127)
	at com.alibaba.druid.sql.parser.SQLSelectParser.expr(SQLSelectParser.java:435)
	at com.alibaba.druid.sql.parser.SQLSelectParser.parseWhere(SQLSelectParser.java:237)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlSelectParser.query(MySqlSelectParser.java:134)
	at com.alibaba.druid.sql.parser.SQLSelectParser.select(SQLSelectParser.java:60)
	at com.alibaba.druid.sql.parser.SQLExprParser.primary(SQLExprParser.java:391)
	at com.alibaba.druid.sql.dialect.mysql.parser.MySqlExprParser.primary(MySqlExprParser.java:166)
	at org.nlpcn.es4sql.parse.ElasticSqlExprParser.primary(ElasticSqlExprParser.java:108)
	at com.alibaba.druid.sql.parser.SQLExprParser.expr(SQLExprParser.java:121)
	at org.nlpcn.es4sql.query.ESActionFactory.toSqlExpr(ESActionFactory.java:118)
	at org.nlpcn.es4sql.query.ESActionFactory.create(ESActionFactory.java:44)
	at org.nlpcn.es4sql.SearchDao.explain(SearchDao.java:44)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:60)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:49)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:52:40.139 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController 查询错误  ERROR. token : AND, pos : 87
10:52:46.013 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "path" : {
              "terms" : {
                "field" : "path",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:52:46.294 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间278
10:52:53.526 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1h",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "path" : {
              "terms" : {
                "field" : "path",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:52:53.764 http-nio-9998-exec-9  INFO      c.k.d.q.s.EsService es查询时间230
17:39:50.140 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "ottvideoyd.hifuntv.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "path" : {
              "terms" : {
                "field" : "path",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
17:39:50.191 http-nio-9998-exec-10  INFO      c.k.d.q.s.EsService es查询时间42
17:39:52.204 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "ottvideoyd.hifuntv.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "path" : {
              "terms" : {
                "field" : "path",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "flow" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
17:39:52.248 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间37
20:01:02.499         Thread-3  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Wed Sep 21 10:33:16 CST 2016]; root of context hierarchy
20:01:02.515         Thread-3  INFO o.s.j.e.a.AnnotationMBeanExporter Unregistering JMX-exposed beans on shutdown
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option PermSize=256M; support was removed in 8.0
Java HotSpot(TM) 64-Bit Server VM warning: UseCMSCompactAtFullCollection is deprecated and will likely be removed in a future release.
20:01:13,364 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
20:01:13,364 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
20:01:13,364 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
20:01:13,365 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
20:01:13,365 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/sunmaolin/common-query-api/conf/logback.xml]
20:01:13,365 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar!/logback.xml]
20:01:13,523 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
20:01:13,526 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Adding LoggerContextListener of type [ch.qos.logback.classic.jul.LevelChangePropagator] to the object stack
20:01:13,569 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating DEBUG level on Logger[ROOT] onto the JUL framework
20:01:13,570 |-INFO in ch.qos.logback.classic.joran.action.LoggerContextListenerAction - Starting LoggerContextListener
20:01:13,570 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
20:01:13,573 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
20:01:13,581 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
20:01:13,637 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
20:01:13,640 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
20:01:13,660 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
20:01:13,661 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern /home/sunmaolin/common-query-api/logs/%d{MMdd}.log for the active file
20:01:13,664 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - The date pattern is 'MMdd' from file name pattern '/home/sunmaolin/common-query-api/logs/%d{MMdd}.log'.
20:01:13,664 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Roll-over at midnight.
20:01:13,668 |-INFO in c.q.l.core.rolling.DefaultTimeBasedFileNamingAndTriggeringPolicy - Setting initial period to Wed Sep 21 20:01:13 CST 2016
20:01:13,669 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
20:01:13,669 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: /home/sunmaolin/common-query-api/logs/0921.log
20:01:13,669 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
20:01:13,670 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
20:01:13,672 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
20:01:13,672 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [FILE] to ch.qos.logback.classic.AsyncAppender[ASYNC]
20:01:13,672 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [FILE] to AsyncAppender.
20:01:13,672 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
20:01:13,672 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
20:01:13,672 |-INFO in ch.qos.logback.classic.jul.LevelChangePropagator@4fe3c938 - Propagating INFO level on Logger[ROOT] onto the JUL framework
20:01:13,672 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
20:01:13,672 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
20:01:13,673 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@5383967b - Registering current configuration as safe fallback point

20:01:13.678             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting .......

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.2.5.RELEASE)

20:01:14.040             main  INFO c.k.dc.queryapi.QueryApi Starting QueryApi v1.0-SNAPSHOT on hz02-cs-app071228.hz02.ksyun.com with PID 16594 (/home/sunmaolin/common-query-api/lib/common-query-api-1.0-SNAPSHOT.jar started by sunmaolin in /home/sunmaolin/common-query-api)
20:01:14.070             main  INFO o.s.b.c.e.AnnotationConfigEmbeddedWebApplicationContext Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Wed Sep 21 20:01:14 CST 2016]; root of context hierarchy
20:01:14.596             main  INFO o.s.b.f.s.DefaultListableBeanFactory Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]
20:01:14.734             main  INFO o.s.b.f.a.AutowiredAnnotationBeanPostProcessor JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
20:01:14.799             main  INFO     o.h.v.i.util.Version HV000001: Hibernate Validator 5.1.3.Final
20:01:14.886             main  INFO o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker Bean 'org.springframework.scheduling.annotation.SchedulingConfiguration' of type [class org.springframework.scheduling.annotation.SchedulingConfiguration$$EnhancerBySpringCGLIB$$3536fafc] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
20:01:15.141             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat initialized with port(s): 9998 (http)
20:01:15.224             main  INFO  o.a.c.c.StandardService Starting service Tomcat
20:01:15.225             main  INFO   o.a.c.c.StandardEngine Starting Servlet Engine: Apache Tomcat/8.0.23
20:01:15.351 localhost-startStop-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring embedded WebApplicationContext
20:01:15.351 localhost-startStop-1  INFO    o.s.w.c.ContextLoader Root WebApplicationContext: initialization completed in 1281 ms
20:01:16.020 localhost-startStop-1  INFO o.s.b.c.e.ServletRegistrationBean Mapping servlet: 'dispatcherServlet' to [/]
20:01:16.024 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'characterEncodingFilter' to: [/*]
20:01:16.024 localhost-startStop-1  INFO o.s.b.c.e.FilterRegistrationBean Mapping filter: 'hiddenHttpMethodFilter' to: [/*]
log4j:WARN No appenders could be found for logger (org.elasticsearch.plugins).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
20:01:17.293             main  INFO      c.k.d.q.s.EsService es连接成功
20:01:17.405             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerAdapter Looking for @ControllerAdvice: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@4313f5bc: startup date [Wed Sep 21 20:01:14 CST 2016]; root of context hierarchy
20:01:17.448             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/query/normal]}" onto public org.springframework.http.ResponseEntity<?> com.ksc.dc.queryapi.controller.QueryController.normal(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String) throws org.json.JSONException
20:01:17.449             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error],produces=[text/html]}" onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest)
20:01:17.449             main  INFO o.s.w.s.m.m.a.RequestMappingHandlerMapping Mapped "{[/error]}" onto public org.springframework.http.ResponseEntity<java.util.Map<java.lang.String, java.lang.Object>> org.springframework.boot.autoconfigure.web.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
20:01:17.462             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:01:17.462             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:01:17.482             main  INFO o.s.w.s.h.SimpleUrlHandlerMapping Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
20:01:17.526             main  INFO o.s.j.e.a.AnnotationMBeanExporter Registering beans for JMX exposure on startup
20:01:17.545             main  INFO o.a.c.h.Http11NioProtocol Initializing ProtocolHandler ["http-nio-9998"]
20:01:17.549             main  INFO o.a.c.h.Http11NioProtocol Starting ProtocolHandler ["http-nio-9998"]
20:01:17.550             main  INFO o.a.t.u.n.NioSelectorPool Using a shared selector for servlet write/read
20:01:17.559             main  INFO o.s.b.c.e.t.TomcatEmbeddedServletContainer Tomcat started on port(s): 9998 (http)
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi Started QueryApi in 3.732 seconds (JVM running for 5.056)
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi basicErrorController
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi beanNameHandlerMapping
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi beanNameViewResolver
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi characterEncodingFilter
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi defaultServletHandlerMapping
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi defaultViewResolver
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi dispatcherServlet
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi dispatcherServletRegistration
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi embeddedServletContainerCustomizerBeanPostProcessor
20:01:17.560             main  INFO c.k.dc.queryapi.QueryApi error
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi errorAttributes
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi esService
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi faviconHandlerMapping
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi faviconRequestHandler
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi handlerExceptionResolver
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi hiddenHttpMethodFilter
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi http.mappers.CONFIGURATION_PROPERTIES
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi httpRequestHandlerAdapter
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapper
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi jacksonObjectMapperBuilder
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mappingJackson2HttpMessageConverter
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mbeanExporter
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mbeanServer
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi messageConverters
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi multipart.CONFIGURATION_PROPERTIES
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi multipartConfigElement
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi multipartResolver
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcContentNegotiationManager
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcConversionService
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcPathMatcher
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcResourceUrlProvider
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcUriComponentsContributor
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcUrlPathHelper
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcValidator
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi mvcViewResolver
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi objectNamingStrategy
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.AutoConfigurationPackages
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.condition.BeanTypeRegistry
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.jta.JtaAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.DispatcherServletAutoConfiguration$DispatcherServletConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.EmbeddedServletContainerAutoConfiguration$EmbeddedTomcat
20:01:17.561             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpEncodingAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.HttpMessageConvertersAutoConfiguration$StringHttpMessageConverterConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.MultipartAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.ServerPropertiesAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$EnableWebMvcConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter$FaviconConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration$TomcatWebSocketConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.store
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.enhancedConfigurationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalAutowiredAnnotationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalCommonAnnotationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalConfigurationAnnotationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalRequiredAnnotationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.context.annotation.internalScheduledAnnotationProcessor
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi org.springframework.scheduling.annotation.SchedulingConfiguration
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi propertySourcesPlaceholderConfigurer
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi queryApi
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi queryController
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi requestContextListener
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerAdapter
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi requestMappingHandlerMapping
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi resourceHandlerMapping
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi serverProperties
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi simpleControllerHandlerAdapter
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi spring.http.encoding.CONFIGURATION_PROPERTIES
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi spring.jackson.CONFIGURATION_PROPERTIES
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi spring.jta.CONFIGURATION_PROPERTIES
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi spring.mvc.CONFIGURATION_PROPERTIES
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi spring.resources.CONFIGURATION_PROPERTIES
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi stringHttpMessageConverter
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi tomcatEmbeddedServletContainerFactory
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi viewControllerHandlerMapping
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi viewResolver
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi websocketContainerCustomizer
20:01:17.562             main  INFO c.k.dc.queryapi.QueryApi QueryApi starting success
23:29:17.010 http-nio-9998-exec-1  INFO        o.a.c.c.C.[.[.[/] Initializing Spring FrameworkServlet 'dispatcherServlet'
23:29:17.011 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization started
23:29:17.029 http-nio-9998-exec-1  INFO o.s.w.s.DispatcherServlet FrameworkServlet 'dispatcherServlet': initialization completed in 18 ms
23:29:17.057 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 
java.lang.RuntimeException: 版本错误，现阶段版本为2.0.0
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:85)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
23:29:17.068 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误  版本错误，现阶段版本为2.0.0
09:34:39.200 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController businessline=video start=201609131354 end=201609131358 filter=userid='73407218' and domain='funchlscdn.lechange.cn' returnField=domain calcFunc=sum(times) count timeInterval=1m ver=2.0.0 type=streamCount 
09:34:39.495 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73407218"
            }
          }, {
            "term" : {
              "domain" : "funchlscdn.lechange.cn"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473746040000,
                "to" : 1473746280000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 2
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473746040000,
          "max" : 1473746280000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
09:34:39.613 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间4
09:52:57.332 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController ver=2.0.0 usinessline=video start=201609121650 end=201609121706 filter=level='E' and userid='73402418' and ( ( mode='pull' and role='Cache' ) or ( method in ('GET','HEAD') and code in ('200','206','304') ) ) and domain='realflv3.plu.cn'  and ( ( channel='live' and sname='ffea40ea2f8e4a5e95096e0f89227092' )  or ( sname='/live/ffea40ea2f8e4a5e95096e0f89227092')) returnField=domain,channel,sname calcFunc=sum(downTraffic) downflow,sum(upperTraffic) upflow timeInterval=5m 
java.lang.NullPointerException
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:92)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
09:52:57.334 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController 查询错误  null
09:52:57.361 http-nio-9998-exec-4 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.json.JSONException: JSONObject["status"] not found.] with root cause
org.json.JSONException: JSONObject["status"] not found.
	at org.json.JSONObject.get(JSONObject.java:498) ~[json-20090211.jar:na]
	at org.json.JSONObject.getInt(JSONObject.java:559) ~[json-20090211.jar:na]
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:68) ~[common-query-api-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_65]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_65]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_65]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_65]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]
09:53:22.465 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController ver=2.0.0 usinessline=video start=201609121650 end=201609121706 filter=level='E' and userid='73402418' and ( ( mode='pull' and role='Cache' ) or ( method in ('GET','HEAD') and code in ('200','206','304') ) ) and domain='realflv3.plu.cn'  and ( ( channel='live' and sname='ffea40ea2f8e4a5e95096e0f89227092' )  or ( sname='/live/ffea40ea2f8e4a5e95096e0f89227092')) returnField=domain,channel,sname calcFunc=sum(downTraffic) downflow,sum(upperTraffic) upflow timeInterval=5m 
java.lang.NullPointerException
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:92)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
09:53:22.467 http-nio-9998-exec-5  INFO c.k.d.q.c.QueryController 查询错误  null
09:53:22.468 http-nio-9998-exec-5 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.json.JSONException: JSONObject["status"] not found.] with root cause
org.json.JSONException: JSONObject["status"] not found.
	at org.json.JSONObject.get(JSONObject.java:498) ~[json-20090211.jar:na]
	at org.json.JSONObject.getInt(JSONObject.java:559) ~[json-20090211.jar:na]
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:68) ~[common-query-api-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_65]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_65]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_65]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_65]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]
09:53:38.892 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController ver=2.0.0 usinessline=video start=201609121650 end=201609121706 filter=level='E' and userid='73402418' and ( ( mode='pull' and role='Cache' ) or ( method in ('GET','HEAD') and code in ('200','206','304') ) ) and domain='realflv3.plu.cn'  and ( ( channel='live' and sname='ffea40ea2f8e4a5e95096e0f89227092' )  or ( sname='/live/ffea40ea2f8e4a5e95096e0f89227092')) returnField=domain,channel,sname calcFunc=sum(downTraffic) downflow,sum(upperTraffic) upflow timeInterval=5m 
java.lang.NullPointerException
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:92)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
09:53:38.894 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController 查询错误  null
09:53:38.896 http-nio-9998-exec-6 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.json.JSONException: JSONObject["status"] not found.] with root cause
org.json.JSONException: JSONObject["status"] not found.
	at org.json.JSONObject.get(JSONObject.java:498) ~[json-20090211.jar:na]
	at org.json.JSONObject.getInt(JSONObject.java:559) ~[json-20090211.jar:na]
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:68) ~[common-query-api-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_65]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_65]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_65]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_65]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]
09:53:49.269 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController businessline=video start=201609131354 end=201609131358 filter=userid='73407218' and domain='funchlscdn.lechange.cn' returnField=domain calcFunc=sum(times) count timeInterval=1m ver=2.0.0 type=streamCount 
09:53:49.272 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "userid" : "73407218"
            }
          }, {
            "term" : {
              "domain" : "funchlscdn.lechange.cn"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473746040000,
                "to" : 1473746280000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 2
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "1m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473746040000,
          "max" : 1473746280000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "count" : {
              "sum" : {
                "field" : "times"
              }
            }
          }
        }
      }
    }
  }
}
09:53:49.523 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间248
09:54:15.003 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController ver=2.0.0 usinessline=video start=201609121650 end=201609121706 filter=level='E' and userid='73402418' and ( ( mode='pull' and role='Cache' ) or ( method in ('GET','HEAD') and code in ('200','206','304') ) ) and domain='realflv3.plu.cn'  and ( ( channel='live' and sname='ffea40ea2f8e4a5e95096e0f89227092' )  or ( sname='/live/ffea40ea2f8e4a5e95096e0f89227092')) returnField=domain,channel,sname calcFunc=sum(downTraffic) downflow,sum(upperTraffic) upflow timeInterval=5m 
java.lang.NullPointerException
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:92)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
09:54:15.004 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController 查询错误  null
09:54:15.005 http-nio-9998-exec-8 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.json.JSONException: JSONObject["status"] not found.] with root cause
org.json.JSONException: JSONObject["status"] not found.
	at org.json.JSONObject.get(JSONObject.java:498) ~[json-20090211.jar:na]
	at org.json.JSONObject.getInt(JSONObject.java:559) ~[json-20090211.jar:na]
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:68) ~[common-query-api-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_65]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_65]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_65]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_65]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]
10:03:02.256 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 
java.lang.RuntimeException: 版本错误，现阶段版本为2.0.0
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:85)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:858)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:03:02.258 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误  版本错误，现阶段版本为2.0.0
10:08:16.177 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609080000 end=201609080016 filter=level='E' and method in ('GET','HEAD') and userid='73406303' and domain='apk1.cdn.anzhi.com' calcFunc=sum(times) count returnField=code,status timeInterval=5m 
10:08:16.194 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:08:16.390 http-nio-9998-exec-1  INFO      c.k.d.q.s.EsService es查询时间191
10:14:44.632 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609080000 end=201609080016 filter=level='E' and method in ('GET','HEAD') and userid='73406303' and domain='apk1.cdn.anzhi.com' calcFunc=sum(times) count,sum(traffic) tr returnField=code,status timeInterval=5m 
10:14:44.637 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "term" : {
              "domain" : "apk1.cdn.anzhi.com"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1473264000000,
                "to" : 1473264960000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM", "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1473264000000,
          "max" : 1473264960000
        }
      },
      "aggregations" : {
        "code" : {
          "terms" : {
            "field" : "code",
            "size" : 0
          },
          "aggregations" : {
            "status" : {
              "terms" : {
                "field" : "status",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                },
                "tr" : {
                  "sum" : {
                    "field" : "traffic"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:14:44.773 http-nio-9998-exec-2  INFO      c.k.d.q.s.EsService es查询时间132
10:20:50.563 http-nio-9998-exec-3  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609180100 end=201609180105 filter=level='E' and method in ('GET','HEAD') and code in ('200','206','304') and userid='73406303' returnField=domain,remoteipisp calcFunc=sum(times) count timeInterval=5m 
10:20:50.567 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:21:11.011 http-nio-9998-exec-4  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609180100 end=201609180105 filter=level='E' and method in ('GET','HEAD') and code in ('200','206','304') and userid='73406303' returnField=domain,remoteipisp calcFunc=sum(times) count timeInterval=5m 
10:21:11.014 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:21:34.811 http-nio-9998-exec-4  INFO      c.k.d.q.s.EsService es查询时间23789
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:21:34.876 http-nio-9998-exec-3  INFO      c.k.d.q.s.EsService es查询时间44304
10:21:46.284 http-nio-9998-exec-6  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609180100 end=201609180105 filter=level='E' and method in ('GET','HEAD') and code in ('200','206','304') and userid='73406303' returnField=domain,remoteipisp calcFunc=sum(times) count timeInterval=5m 
10:21:46.287 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:22:09.473 http-nio-9998-exec-6  INFO      c.k.d.q.s.EsService es查询时间23177
10:22:50.063 http-nio-9998-exec-7  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609180100 end=201609180105 filter=level='E' and method in ('GET','HEAD') and code in ('200','206','304') and userid='73406303' returnField=domain,remoteipisp calcFunc=sum(times) count timeInterval=5m 
10:22:50.067 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:22:56.783 http-nio-9998-exec-7  INFO      c.k.d.q.s.EsService es查询时间6709
10:23:47.827 http-nio-9998-exec-8  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=201609180100 end=201609180105 filter=level='E' and method in ('GET','HEAD') and code in ('200','206','304') and userid='73406303' returnField=domain,remoteipisp calcFunc=sum(times) count timeInterval=5m 
10:23:47.830 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询语句{
  "from" : 0,
  "size" : 0,
  "query" : {
    "bool" : {
      "must" : {
        "bool" : {
          "must" : [ {
            "term" : {
              "level" : "E"
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "method" : {
                    "query" : "GET",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "method" : {
                    "query" : "HEAD",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "bool" : {
              "should" : [ {
                "match" : {
                  "code" : {
                    "query" : "200",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "206",
                    "type" : "phrase"
                  }
                }
              }, {
                "match" : {
                  "code" : {
                    "query" : "304",
                    "type" : "phrase"
                  }
                }
              } ]
            }
          }, {
            "term" : {
              "userid" : "73406303"
            }
          }, {
            "range" : {
              "time" : {
                "from" : 1474131600000,
                "to" : 1474131900000,
                "include_lower" : true,
                "include_upper" : true
              }
            }
          }, {
            "term" : {
              "servicetype" : 1
            }
          }, {
            "term" : {
              "businessline" : 1
            }
          } ]
        }
      }
    }
  },
  "_source" : {
    "includes" : [ "SUM" ],
    "excludes" : [ ]
  },
  "aggregations" : {
    "time" : {
      "date_histogram" : {
        "field" : "time",
        "interval" : "5m",
        "min_doc_count" : 0,
        "time_zone" : "+08:00",
        "format" : "yyyy-MM-dd HH:mm:ss",
        "extended_bounds" : {
          "min" : 1474131600000,
          "max" : 1474131900000
        }
      },
      "aggregations" : {
        "domain" : {
          "terms" : {
            "field" : "domain",
            "size" : 0
          },
          "aggregations" : {
            "remoteipisp" : {
              "terms" : {
                "field" : "remoteipisp",
                "size" : 0
              },
              "aggregations" : {
                "count" : {
                  "sum" : {
                    "field" : "times"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
10:24:04.046 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController businessline=video start=201609131354 end=201609131358 filter=userid='73407218'  and domain='funchlscdn.lechange.cn' returnField=terms(field='domain',alias='domain',size='0',order='flow') calcFunc=sum(traffic) flow timeInterval=1m ver=2.0.0 type=streamCount order=flow 
java.lang.RuntimeException: returnField个数不能超过3个
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:139)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:24:04.049 http-nio-9998-exec-9  INFO c.k.d.q.c.QueryController 查询错误  returnField个数不能超过3个
java.lang.ArrayIndexOutOfBoundsException: 2
	at org.nlpcn.es4sql.result.AggregationResultParser.getResult(AggregationResultParser.java:72)
	at org.nlpcn.es4sql.result.AggregationResultParser.resultParser(AggregationResultParser.java:41)
	at com.ksc.dc.queryapi.service.EsService.query(EsService.java:65)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:24:11.127 http-nio-9998-exec-8  INFO      c.k.d.q.s.EsService es查询时间23285
10:24:44.874 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController ver=2.0.0 usinessline=video start=201609121650 end=201609121706 filter=level='E' and userid='73402418' and ( ( mode='pull' and role='Cache' ) or ( method in ('GET','HEAD') and code in ('200','206','304') ) ) and domain='realflv3.plu.cn'  and ( ( channel='live' and sname='ffea40ea2f8e4a5e95096e0f89227092' )  or ( sname='/live/ffea40ea2f8e4a5e95096e0f89227092')) returnField=domain,channel,sname calcFunc=sum(downTraffic) downflow,sum(upperTraffic) upflow timeInterval=5m 
java.lang.NullPointerException
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:92)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:24:44.876 http-nio-9998-exec-10  INFO c.k.d.q.c.QueryController 查询错误  null
10:24:44.879 http-nio-9998-exec-10 ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.json.JSONException: JSONObject["status"] not found.] with root cause
org.json.JSONException: JSONObject["status"] not found.
	at org.json.JSONObject.get(JSONObject.java:498) ~[json-20090211.jar:na]
	at org.json.JSONObject.getInt(JSONObject.java:559) ~[json-20090211.jar:na]
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:68) ~[common-query-api-1.0-SNAPSHOT.jar:1.0-SNAPSHOT]
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source) ~[na:na]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_65]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[na:1.8.0_65]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843) ~[spring-webmvc-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-4.1.7.RELEASE.jar:4.1.7.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) ~[tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_65]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_65]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.0.23.jar:8.0.23]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_65]
10:59:56.194 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=2016082500 end=2016082600 filter= calcFunc= returnField= timeInterval=5m order= limit= type= 
java.lang.RuntimeException: 时间必须是12位字符串
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:112)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
10:59:56.196 http-nio-9998-exec-1  INFO c.k.d.q.c.QueryController 查询错误  时间必须是12位字符串
11:02:15.507 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController ver=2.0.0 businessline=cdn start=2016082500 end=2016082600 filter=level='E' and domain='xxx.com' and code in ('200','206','304') calcFunc= returnField= timeInterval=5m order= limit= type= 
java.lang.RuntimeException: 时间必须是12位字符串
	at com.ksc.dc.queryapi.controller.QueryController.validatParam(QueryController.java:112)
	at com.ksc.dc.queryapi.controller.QueryController.normal(QueryController.java:56)
	at sun.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1521)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1478)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:745)
11:02:15.509 http-nio-9998-exec-2  INFO c.k.d.q.c.QueryController 查询错误  时间必须是12位字符串
